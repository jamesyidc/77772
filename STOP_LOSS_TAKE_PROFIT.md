# 止盈止损计算说明

## 📊 实际盈亏百分比 vs 价格变动百分比

### 核心概念

止盈止损基于**实际盈亏百分比**，而非价格变动百分比。这是因为杠杆会放大盈亏。

### 计算公式

```
实际盈亏% = 价格变动% × 杠杆倍数
```

反过来：
```
价格变动% = 实际盈亏% ÷ 杠杆倍数
```

### 触发价格计算

#### 做多（买入）情况

**止损触发价：**
```
止损触发价 = 开仓价 × (1 - 止损百分比 / 杠杆倍数)
```

**止盈触发价：**
```
止盈触发价 = 开仓价 × (1 + 止盈百分比 / 杠杆倍数)
```

#### 做空（卖出）情况

**止损触发价：**
```
止损触发价 = 开仓价 × (1 + 止损百分比 / 杠杆倍数)
```

**止盈触发价：**
```
止盈触发价 = 开仓价 × (1 - 止盈百分比 / 杠杆倍数)
```

## 📝 实际例子

### 例子 1: 10倍杠杆做多 BTC

- **开仓价格**: $50,000
- **杠杆**: 10x
- **止损**: 5%（实际亏损5%）
- **止盈**: 10%（实际盈利10%）

**计算过程：**

1. **止损触发价**：
   - 价格需要下跌：5% ÷ 10 = 0.5%
   - 触发价 = $50,000 × (1 - 0.5%) = $50,000 × 0.995 = **$49,750**
   - 当价格跌至 $49,750 时，实际亏损 5%

2. **止盈触发价**：
   - 价格需要上涨：10% ÷ 10 = 1%
   - 触发价 = $50,000 × (1 + 1%) = $50,000 × 1.01 = **$50,500**
   - 当价格涨至 $50,500 时，实际盈利 10%

### 例子 2: 20倍杠杆做空 ETH

- **开仓价格**: $3,000
- **杠杆**: 20x
- **止损**: 5%（实际亏损5%）
- **止盈**: 15%（实际盈利15%）

**计算过程：**

1. **止损触发价**：
   - 价格需要上涨：5% ÷ 20 = 0.25%
   - 触发价 = $3,000 × (1 + 0.25%) = $3,000 × 1.0025 = **$3,007.5**
   - 当价格涨至 $3,007.5 时，实际亏损 5%

2. **止盈触发价**：
   - 价格需要下跌：15% ÷ 20 = 0.75%
   - 触发价 = $3,000 × (1 - 0.75%) = $3,000 × 0.9925 = **$2,977.5**
   - 当价格跌至 $2,977.5 时，实际盈利 15%

### 例子 3: 1倍杠杆（无杠杆）做多 SOL

- **开仓价格**: $100
- **杠杆**: 1x
- **止损**: 5%（实际亏损5%）
- **止盈**: 10%（实际盈利10%）

**计算过程：**

1. **止损触发价**：
   - 价格需要下跌：5% ÷ 1 = 5%
   - 触发价 = $100 × (1 - 5%) = $100 × 0.95 = **$95**
   - 当价格跌至 $95 时，实际亏损 5%

2. **止盈触发价**：
   - 价格需要上涨：10% ÷ 1 = 10%
   - 触发价 = $100 × (1 + 10%) = $100 × 1.1 = **$110**
   - 当价格涨至 $110 时，实际盈利 10%

## 📊 不同杠杆倍数对比表

| 杠杆倍数 | 5%实际止损 | 10%实际止盈 | 价格变动幅度 |
|---------|-----------|-----------|------------|
| 1x      | 5% 价格下跌 | 10% 价格上涨 | 5% / 10% |
| 5x      | 1% 价格下跌 | 2% 价格上涨 | 1% / 2% |
| 10x     | 0.5% 价格下跌 | 1% 价格上涨 | 0.5% / 1% |
| 20x     | 0.25% 价格下跌 | 0.5% 价格上涨 | 0.25% / 0.5% |
| 50x     | 0.1% 价格下跌 | 0.2% 价格上涨 | 0.1% / 0.2% |
| 100x    | 0.05% 价格下跌 | 0.1% 价格上涨 | 0.05% / 0.1% |

## ⚠️ 重要提示

1. **杠杆越高，触发越敏感**：
   - 100倍杠杆，5%止损只需价格变动0.05%
   - 建议高杠杆时适当增加止损百分比

2. **资金管理建议**：
   - 建议止损设置在 5-10% 范围
   - 止盈可以设置在 10-50% 范围
   - 不要过度使用高杠杆

3. **市场波动考虑**：
   - 高杠杆 + 小止损 = 容易被秒针止损
   - 根据市场波动性调整止损幅度

4. **多空方向**：
   - 做多：价格上涨盈利，下跌亏损
   - 做空：价格下跌盈利，上涨亏损
   - 系统会自动根据方向计算正确的触发价

## 🎯 最佳实践

1. **保守策略**（推荐新手）：
   - 杠杆：1-5x
   - 止损：5-10%
   - 止盈：10-20%

2. **中等策略**：
   - 杠杆：5-10x
   - 止损：3-5%
   - 止盈：10-30%

3. **激进策略**（风险高）：
   - 杠杆：10-20x
   - 止损：2-3%
   - 止盈：5-15%

4. **超高杠杆**（不推荐）：
   - 杠杆：>20x
   - 需要非常小心，微小波动都可能触发止损

## 📱 系统使用

在交易页面：
1. 选择"实际盈亏百分比"模式
2. 选择止损百分比（5%, 10%, 15%, 20%, 25%, 30%, 35%, 40%, 45%, 50%）
3. 选择止盈百分比（5%, 10%, 15%, 20%, 25%, 30%, 35%, 40%, 45%, 50%）
4. 系统会根据您的杠杆自动计算触发价格

系统会显示提示：
```
百分比基于实际盈亏计算。
例如：10倍杠杆，设置5%止损，则价格变动0.5%时触发止损。
```

## 🔍 验证方法

您可以通过以下方式验证计算是否正确：

```
实际盈亏% = (触发价 - 开仓价) / 开仓价 × 杠杆倍数 × 100%
```

例如：
- 开仓价：$50,000
- 触发价：$49,750
- 杠杆：10x
- 计算：($49,750 - $50,000) / $50,000 × 10 × 100% = -5%

完美！确实是亏损5%时触发。
